---
title: 使用hexo在github上搭建博客：升级篇
date: 2019-10-08 10:07:25
category: 其它技术
tags: [github, hexo]
---

本文记录了升级hexo以及NexT版本的过程中遇到的各种问题。

<!-- more -->
Hexo通常半年一更，更新时间并不稳定，版本之间变化通常都不小，可能会导致兼容性问题。建议在本地仔细测试后再升级。更新日志在[官网新闻页](https://hexo.io/news/)。

NexT主题通常会在每个月的1号更新一个版本，在官方网站的[首页](https://theme-next.org/)会贴出详细的更新日志，可进行查看，判断自己是否需要进行更新。没有必要每个月都准时进行更新，只要博客的版本稳定可用就行了。

## 笨方法升级NexT
我使用的是最笨的更新方法，即手动合并配置。注意，此法需要在之前备份时保留主题文件夹下的`.git`文件夹。我采用的办法是将这个文件夹改个名，然后丢到`.gitignore`文件里去。想要更新主题的时候再改回来。

在**主题文件夹中**打开控制台，执行
>git pull 

此时肯定有一大堆冲突，尤其是主题配置文件，一定会冲突。

把冲突的文件一一剪切出来，然后再次执行
>git pull 

这样，更新就完成了。

接下来需要还原我们之前进行的配置。使用VS Code的“选择以进行比较”功能（需打开侧边栏），比较clone下来的文件和我们之前剪切走的文件，查看新文件与旧文件在哪些地方出现了改变。手动将这些配置一一复制回去即可。

通常，小版本的更新改变都不会特别大，一般就是多了几个功能、修了几个bug什么的，因此工作量不算太大，十来分钟就能完成，还可以顺便了解一下新增了哪些有趣的功能。因此笔者仍在采用笨方法。主题配置文件中配置项的位置可能会发生变化，本来在前面的配置可能突然跑到后面去了，因此不要无脑复制，要多多留意。

版本更新后，之前做的一些配置可能会失效，也可能会被集成到一起，详细内容还要参考官方网站了。如果用不到更新的新特性的话，个人不建议频繁更新。如果某个第三方模块在更新后失效，最好的办法就是卸载重装。如果还不行就只能等作者适配了……

## 数据文件法升级NexT
利用Hexo的数据文件特性，似乎可以较容易地更新主题。不过个人感觉此方法会把博客的配置搞的乱七八糟的，也并没省多少事，因此未进行过尝试。如果读者觉得这种方法很方便，可以教教我~

感兴趣的同学可以自行参考[官方文档](https://github.com/theme-next/hexo-theme-next/blob/master/docs/zh-CN/DATA-FILES.md)。

## 升级hexo
近日hexo发布了4.0.0版本，我尝试进行了更新，发现较为容易。

修改博客根目录下的`package.json`文件，将
>"hexo": "^3.9.0",

改为
>"hexo": "^4.0.0",

然后右键打开Git Bash，执行
>npm install

即可。再次generate，即可发现hexo版本已升级至4.0.0。